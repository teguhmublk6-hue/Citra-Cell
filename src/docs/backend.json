
{
  "entities": {
    "AppConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AppConfig",
      "type": "object",
      "description": "Stores global application configuration settings.",
      "properties": {
        "id": {
          "type": "string"
        },
        "motivationQuote": {
          "type": "string",
          "description": "The daily motivational quote displayed on the home screen."
        },
        "motivationAuthor": {
          "type": "string",
          "description": "The author of the daily motivational quote."
        }
      },
      "required": ["motivationQuote"]
    },
    "KasAccount": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "KasAccount",
      "type": "object",
      "description": "Represents a cash account within the BrimoUI application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the KasAccount entity."
        },
        "label": {
          "type": "string",
          "description": "The display name of the cash account (e.g., Tunai, Bank)."
        },
        "type": {
          "type": "string",
          "description": "The type of the cash account (e.g., Tunai, Bank)."
        },
        "balance": {
          "type": "number",
          "description": "The current balance of the cash account."
        },
        "minimumBalance": {
          "type": "number",
          "description": "The minimum balance threshold for the account."
        },
        "color": {
          "type": "string",
          "description": "The background color associated with the account for UI rendering."
        },
        "settlementDestinationAccountId": {
          "type": "string",
          "description": "For merchant accounts, the ID of the KasAccount where settled funds are transferred."
        },
        "iconUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL for the icon of the account, especially for PPOB providers."
        }
      },
      "required": [
        "id",
        "label",
        "type",
        "balance",
        "minimumBalance",
        "color"
      ]
    },
    "Transaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Transaction",
      "type": "object",
      "description": "Represents a financial transaction.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Transaction entity."
        },
        "kasAccountId": {
          "type": "string",
          "description": "Reference to the KasAccount where this transaction is recorded."
        },
        "type": {
          "type": "string",
          "description": "The type of transaction (e.g., credit, debit)."
        },
        "name": {
          "type": "string",
          "description": "A descriptive name for the transaction."
        },
        "account": {
          "type": "string",
          "description": "The counterparty account or description for the transaction."
        },
        "date": {
          "type": "string",
          "description": "The date of the transaction.",
          "format": "date-time"
        },
        "amount": {
          "type": "number",
          "description": "The amount of the transaction."
        },
        "balanceBefore": {
          "type": "number",
          "description": "The balance of the kas account before the transaction."
        },
        "balanceAfter": {
          "type": "number",
          "description": "The balance of the kas account after the transaction."
        },
        "sourceKasAccountId": {
          "type": "string",
          "description": "For transfers, the ID of the source KasAccount."
        },
        "destinationKasAccountId": {
          "type": "string",
          "description": "For transfers, the ID of the destination KasAccount."
        },
        "deviceName": {
          "type": "string",
          "description": "The name of the device that created the transaction."
        },
        "category": {
          "type": "string",
          "description": "A category to group transactions, e.g., 'transfer', 'operational', 'capital', 'customer_transfer_debit', 'customer_payment'."
        },
        "auditId": {
            "type": "string",
            "description": "The ID of the corresponding audit log document in a root collection (e.g., customerTransfers)."
        }
      },
      "required": [
        "id",
        "kasAccountId",
        "type",
        "name",
        "account",
        "date",
        "amount"
      ]
    },
    "CustomerTransfer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CustomerTransfer",
      "type": "object",
      "description": "Represents a transfer service transaction for a customer.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the CustomerTransfer transaction."
        },
        "date": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp of the transaction."
        },
        "sourceKasAccountId": {
          "type": "string",
          "description": "The ID of the internal KasAccount used to send the money."
        },
        "destinationBankName": {
          "type": "string",
          "description": "The name of the customer's destination bank."
        },
        "destinationAccountName": {
          "type": "string",
          "description": "The name of the recipient account holder."
        },
        "transferAmount": {
          "type": "number",
          "description": "The principal amount transferred to the customer's destination."
        },
        "bankAdminFee": {
          "type": "number",
          "description": "The fee charged by the bank for the transfer."
        },
        "serviceFee": {
          "type": "number",
          "description": "The service fee charged to the customer (our profit)."
        },
        "netProfit": {
          "type": "number",
          "description": "The calculated net profit (serviceFee - bankAdminFee)."
        },
        "paymentMethod": {
          "type": "string",
          "enum": [
            "Tunai",
            "Transfer",
            "Split"
          ],
          "description": "How the customer paid for the service."
        },
        "paymentToKasTunaiAmount": {
          "type": "number",
          "description": "Portion of the payment made in cash."
        },
        "paymentToKasTransferAccountId": {
          "type": "string",
          "description": "ID of the KasAccount that received the transfer portion of the payment."
        },
        "paymentToKasTransferAmount": {
          "type": "number",
          "description": "Portion of the payment made via transfer."
        },
        "deviceName": {
          "type": "string",
          "description": "The name of the device that processed the transaction."
        }
      },
      "required": [
        "date",
        "sourceKasAccountId",
        "destinationBankName",
        "destinationAccountName",
        "transferAmount",
        "bankAdminFee",
        "serviceFee",
        "netProfit",
        "paymentMethod",
        "deviceName"
      ]
    },
    "CustomerWithdrawal": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CustomerWithdrawal",
      "type": "object",
      "description": "Represents a cash withdrawal service transaction for a customer.",
      "properties": {
        "id": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "customerName": { "type": "string" },
        "customerBankSource": { "type": "string" },
        "withdrawalAmount": { "type": "number" },
        "serviceFee": { "type": "number" },
        "feePaymentMethod": { "type": "string", "enum": ["Dipotong", "Tunai"] },
        "destinationKasAccountId": { "type": "string" },
        "sourceKasTunaiAccountId": { "type": "string" },
        "deviceName": { "type": "string" }
      },
      "required": [
        "date",
        "customerName",
        "customerBankSource",
        "withdrawalAmount",
        "serviceFee",
        "feePaymentMethod",
        "destinationKasAccountId",
        "sourceKasTunaiAccountId",
        "deviceName"
      ]
    },
    "CustomerTopUp": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CustomerTopUp",
      "type": "object",
      "description": "Represents an E-Wallet top-up service transaction for a customer.",
      "properties": {
        "id": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "sourceKasAccountId": { "type": "string" },
        "destinationEwallet": { "type": "string" },
        "customerName": { "type": "string" },
        "topUpAmount": { "type": "number" },
        "serviceFee": { "type": "number" },
        "paymentMethod": { "type": "string", "enum": ["Tunai", "Transfer", "Split"] },
        "paymentToKasTunaiAmount": { "type": "number" },
        "paymentToKasTransferAccountId": { "type": "string" },
        "paymentToKasTransferAmount": { "type": "number" },
        "deviceName": { "type": "string" }
      },
      "required": [
        "date",
        "sourceKasAccountId",
        "destinationEwallet",
        "customerName",
        "topUpAmount",
        "serviceFee",
        "paymentMethod",
        "deviceName"
      ]
    },
    "CustomerEmoneyTopUp": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CustomerEmoneyTopUp",
      "type": "object",
      "description": "Represents an E-Money top-up service transaction for a customer.",
      "properties": {
        "id": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "sourceKasAccountId": { "type": "string" },
        "destinationEmoney": { "type": "string" },
        "topUpAmount": { "type": "number" },
        "serviceFee": { "type": "number" },
        "paymentMethod": { "type": "string", "enum": ["Tunai", "Transfer", "Split"] },
        "paymentToKasTunaiAmount": { "type": "number" },
        "paymentToKasTransferAccountId": { "type": "string" },
        "paymentToKasTransferAmount": { "type": "number" },
        "deviceName": { "type": "string" }
      },
      "required": [
        "date",
        "sourceKasAccountId",
        "destinationEmoney",
        "topUpAmount",
        "serviceFee",
        "paymentMethod",
        "deviceName"
      ]
    },
    "CustomerVAPayment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CustomerVAPayment",
      "type": "object",
      "description": "Represents a Virtual Account (VA) payment service transaction for a customer.",
      "properties": {
        "id": {
          "type": "string"
        },
        "date": {
          "type": "string",
          "format": "date-time"
        },
        "sourceKasAccountId": {
          "type": "string"
        },
        "serviceProvider": {
          "type": "string"
        },
        "recipientName": {
          "type": "string"
        },
        "paymentAmount": {
          "type": "number"
        },
        "adminFee": {
          "type": "number"
        },
        "serviceFee": {
          "type": "number"
        },
        "netProfit": {
          "type": "number"
        },
        "paymentMethod": {
          "type": "string",
          "enum": [ "Tunai", "Transfer", "Split" ]
        },
        "paymentToKasTunaiAmount": {
          "type": "number"
        },
        "paymentToKasTransferAccountId": {
          "type": "string"
        },
        "paymentToKasTransferAmount": {
          "type": "number"
        },
        "deviceName": {
          "type": "string"
        }
      },
      "required": [
        "date",
        "sourceKasAccountId",
        "serviceProvider",
        "recipientName",
        "paymentAmount",
        "adminFee",
        "serviceFee",
        "netProfit",
        "paymentMethod",
        "deviceName"
      ]
    },
    "PPOBTransaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PPOBTransaction",
      "type": "object",
      "description": "Represents a PPOB (Payment Point Online Bank) transaction for auditing profit and loss.",
      "properties": {
        "id": {
          "type": "string"
        },
        "date": {
          "type": "string",
          "format": "date-time"
        },
        "serviceName": {
          "type": "string",
          "description": "The name of the PPOB service (e.g., Token Listrik, Pulsa, BPJS)."
        },
        "destination": {
          "type": "string",
          "description": "The target of the transaction, e.g., phone number, customer ID, token number."
        },
        "description": {
          "type": "string",
          "description": "A brief description of the transaction."
        },
        "costPrice": {
          "type": "number",
          "description": "The capital or modal price for the service."
        },
        "sellingPrice": {
          "type": "number",
          "description": "The final price paid by the customer."
        },
        "profit": {
          "type": "number",
          "description": "The calculated profit (sellingPrice - costPrice)."
        },
        "deviceName": {
          "type": "string",
          "description": "The name of the device that processed the transaction."
        }
      },
      "required": [
        "date",
        "serviceName",
        "destination",
        "description",
        "costPrice",
        "sellingPrice",
        "profit",
        "deviceName"
      ]
    },
    "PPOBPlnPostpaid": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PPOBPlnPostpaid",
      "type": "object",
      "description": "Represents a PLN Postpaid bill payment transaction.",
      "properties": {
        "id": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "customerName": { "type": "string" },
        "billAmount": { "type": "number", "description": "The actual bill amount (modal)." },
        "totalAmount": { "type": "number", "description": "The total amount paid by the customer (harga jual)." },
        "cashback": { "type": "number", "description": "Cashback received from the PPOB provider." },
        "netProfit": { "type": "number" },
        "sourcePPOBAccountId": { "type": "string" },
        "paymentMethod": { "type": "string", "enum": ["Tunai", "Transfer", "Split"] },
        "paymentToKasTunaiAmount": { "type": "number" },
        "paymentToKasTransferAccountId": { "type": "string" },
        "paymentToKasTransferAmount": { "type": "number" },
        "deviceName": { "type": "string" }
      },
      "required": ["date", "customerName", "billAmount", "totalAmount", "netProfit", "sourcePPOBAccountId", "paymentMethod", "deviceName"]
    },
    "EDCService": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EDCService",
      "type": "object",
      "description": "Represents a transaction for lending an EDC machine service.",
      "properties": {
        "id": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "customerName": { "type": "string" },
        "machineUsed": { "type": "string" },
        "serviceFee": { "type": "number" },
        "paymentToKasTunaiAccountId": { "type": "string" },
        "deviceName": { "type": "string" }
      },
      "required": [
        "date",
        "customerName",
        "machineUsed",
        "serviceFee",
        "paymentToKasTunaiAccountId",
        "deviceName"
      ]
    },
    "Settlement": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Settlement",
      "type": "object",
      "description": "Represents a settlement transaction from a merchant account.",
      "properties": {
        "id": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "sourceMerchantAccountId": { "type": "string" },
        "destinationAccountId": { "type": "string" },
        "grossAmount": { "type": "number" },
        "mdrFee": { "type": "number" },
        "netAmount": { "type": "number" },
        "deviceName": { "type": "string" }
      },
      "required": [
        "date",
        "sourceMerchantAccountId",
        "destinationAccountId",
        "grossAmount",
        "mdrFee",
        "netAmount",
        "deviceName"
      ]
    },
    "CustomerKJPWithdrawal": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CustomerKJPWithdrawal",
      "type": "object",
      "description": "Represents a KJP cash withdrawal service transaction.",
      "properties": {
        "id": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "customerName": { "type": "string" },
        "withdrawalAmount": { "type": "number" },
        "serviceFee": { "type": "number" },
        "feePaymentMethod": { "type": "string", "enum": ["Dipotong", "Tunai"] },
        "destinationMerchantAccountId": { "type": "string" },
        "sourceKasTunaiAccountId": { "type": "string" },
        "deviceName": { "type": "string" }
      },
      "required": [
        "date",
        "customerName",
        "withdrawalAmount",
        "serviceFee",
        "feePaymentMethod",
        "destinationMerchantAccountId",
        "sourceKasTunaiAccountId",
        "deviceName"
      ]
    }
  },
  "firestore": {
    "/appConfig/motivation": {
      "schema": {
        "$ref": "#/entities/AppConfig"
      },
      "description": "Stores global app settings like the daily motivation quote."
    },
    "/kasAccounts/{kasAccountId}": {
      "schema": {
        "$ref": "#/entities/KasAccount"
      },
      "description": "Stores all cash accounts in a global, public collection. All users (anonymous or authenticated) can read and write to this collection."
    },
    "/kasAccounts/{kasAccountId}/transactions/{transactionId}": {
      "schema": {
        "$ref": "#/entities/Transaction"
      },
      "description": "Stores transaction history for each cash account in a global, public subcollection. All users can read and write transactions for any account."
    },
    "/customerTransfers/{customerTransferId}": {
      "schema": {
        "$ref": "#/entities/CustomerTransfer"
      },
      "description": "Stores a log of all customer transfer service transactions for auditing and business intelligence."
    },
    "/customerWithdrawals/{customerWithdrawalId}": {
      "schema": {
        "$ref": "#/entities/CustomerWithdrawal"
      },
      "description": "Stores a log of all customer cash withdrawal service transactions for auditing."
    },
    "/customerTopUps/{customerTopUpId}": {
      "schema": {
        "$ref": "#/entities/CustomerTopUp"
      },
      "description": "Stores a log of all customer e-wallet top-up transactions for auditing."
    },
    "/customerEmoneyTopUps/{emoneyTopUpId}": {
      "schema": {
        "$ref": "#/entities/CustomerEmoneyTopUp"
      },
      "description": "Stores a log of all customer e-money top-up transactions for auditing."
    },
    "/customerVAPayments/{vaPaymentId}": {
      "schema": {
        "$ref": "#/entities/CustomerVAPayment"
      },
      "description": "Stores a log of all customer Virtual Account payment transactions for auditing and business intelligence."
    },
    "/ppobTransactions/{ppobTransactionId}": {
      "schema": {
        "$ref": "#/entities/PPOBTransaction"
      },
      "description": "Stores a log of all PPOB service transactions for auditing profit and loss."
    },
    "/ppobPlnPostpaid/{ppobPlnPostpaidId}": {
      "schema": {
        "$ref": "#/entities/PPOBPlnPostpaid"
      },
      "description": "Stores a log of all PLN Postpaid bill payment transactions."
    },
    "/edcServices/{edcServiceId}": {
      "schema": {
        "$ref": "#/entities/EDCService"
      },
      "description": "Stores a log of all EDC rental service transactions for auditing profit and loss."
    },
    "/settlements/{settlementId}": {
      "schema": {
        "$ref": "#/entities/Settlement"
      },
      "description": "Stores a log of all merchant settlement transactions for auditing."
    },
    "/customerKJPWithdrawals/{kjpWithdrawalId}": {
      "schema": {
        "$ref": "#/entities/CustomerKJPWithdrawal"
      },
      "description": "Stores a log of all KJP withdrawal service transactions for auditing."
    }
  }
}

    